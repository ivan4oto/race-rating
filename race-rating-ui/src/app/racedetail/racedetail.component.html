<div *ngIf="race else loading" class="container" style="margin-top: 10px;">
  <div class="centered-content">
    <button mat-icon-button [routerLink]="['/race', race.id, 'edit']">
      <mat-icon>edit</mat-icon>
    </button>
    <div class="ratings">
      <app-rating-display style="font-size: 30px" [rating]="race.averageTraceScore" [ratingName]=RATINGS_CYRILIC.trace></app-rating-display>
      <app-rating-display style="font-size: 30px" [rating]="race.averageVibeScore" [ratingName]="RATINGS_CYRILIC.atmosphere"></app-rating-display>
      <app-rating-display style="font-size: 30px" [rating]="race.averageOrganizationScore" [ratingName]="RATINGS_CYRILIC.organization"></app-rating-display>
      <app-rating-display style="font-size: 30px" [rating]="race.averageLocationScore" [ratingName]="RATINGS_CYRILIC.location"></app-rating-display>
      <app-rating-display style="font-size: 30px" [rating]="race.averageValueScore" [ratingName]="RATINGS_CYRILIC.price"></app-rating-display>
    </div>
    <div class="race-data-content with-border">
        <div class="info-box">
          <div class="small-grey-text">{{ race.latitude }} / {{ race.longitude }}</div>
          <a href="#">КАРТА</a>
        </div>
        <mat-divider class="divider"></mat-divider>
      <div class="header-box">
          <div class="race-name-header">
            {{ race.name }}
          </div>
      </div>

        <mat-divider class="divider"></mat-divider>

        <div class="info-box">
          <div class="grey-text">
            <b>Tags:</b>
          </div>
          <div>{{ race.terrainTags }}</div>
        </div>

        <mat-divider></mat-divider>

        <div class="info-box">
          <div class="grey-text">
            <b>Дата:</b>
          </div>
          <div>
            <div>{{ race.eventDate | date: 'mediumDate' }}</div>
          </div>
        </div>

        <mat-divider></mat-divider>

        <div class="info-box">
          <div class="grey-text">
            <b>
              Описание:
            </b>
          </div>
          <div class="spacer"></div>
          <div class="description-text">
            {{ race.description }}
          </div>
        </div>

        <mat-divider></mat-divider>

        <div class="info-box">
          <div>
            <b>Уеб страница</b>
          </div>
          <div>
            <a href="#">{{ race.websiteUrl }}</a>
          </div>
        </div>
      <div class="divide-content"></div>
    </div>
    <app-carousel class="carousel-component"></app-carousel>
    <div *ngIf="isUserAuthenticated() else notAuthenticated">
      <app-rating-input *ngIf="!hasUserVoted else userAlreadyVoted"></app-rating-input>
      <ng-template #userAlreadyVoted>
        <h2>You have already voted for this race.</h2>
      </ng-template>
    </div>
    <ng-template #notAuthenticated>
      <h2>You need to be logged in to vote.</h2>
    </ng-template>
    <mat-divider></mat-divider>
    <h1 style="margin-top: 20px;">Comments:</h1>
    <app-comment-section [raceId]="race.id"></app-comment-section>
  </div>
</div>

<ng-template #loading>
  <p>Loading...</p>
</ng-template>
