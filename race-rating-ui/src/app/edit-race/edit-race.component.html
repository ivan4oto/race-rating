<div class="edit-race">
  <form class="edit-race__form" [formGroup]="editRaceForm" (ngSubmit)="onSubmit()">
    <section class="section">
      <div class="section__header">
        <h2>Race details</h2>
        <p>Basics that appear on the event page.</p>
      </div>
      <div class="field-grid">
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input matInput formControlName="name">
        </mat-form-field>

        <mat-form-field class="field-grid__full">
          <mat-label>Description</mat-label>
          <textarea matInput formControlName="description" rows="3"></textarea>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Latitude</mat-label>
          <input matInput formControlName="latitude" type="number">
        </mat-form-field>

        <mat-form-field>
          <mat-label>Longitude</mat-label>
          <input matInput formControlName="longitude" type="number">
        </mat-form-field>

        <mat-form-field>
          <mat-label>Logo URL</mat-label>
          <input matInput formControlName="logoUrl">
        </mat-form-field>

        <mat-form-field>
          <mat-label>Website URL</mat-label>
          <input matInput formControlName="websiteUrl">
        </mat-form-field>

        <mat-form-field>
          <mat-label>Event Date</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="eventDate">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>
    </section>

    <section class="section">
      <div class="section__header">
        <h2>Photos</h2>
        <p>Add or remove event imagery. JPEG/PNG recommended.</p>
      </div>

      <div class="upload">
        <input type="file" #fileInput (change)="onFileSelected($event)" multiple accept="image/*" hidden>
        <button mat-raised-button color="primary" type="button" (click)="fileInput.click()">
          <mat-icon>photo_library</mat-icon>
          Add Photos
        </button>
        <div class="upload__selected" *ngIf="selectedFiles.length">
          <div *ngFor="let file of selectedFiles" class="pill">{{ file.name }}</div>
        </div>
      </div>

      <div class="photo-grid" *ngIf="s3Objects?.length">
        <div class="photo-tile" *ngFor="let s3Object of s3Objects; let i = index">
          <img [src]="s3Object.fullUrl" [alt]="s3Object.name">
          <div class="photo-tile__meta">
            <span class="photo-tile__name">{{ s3Object.name }}</span>
            <button mat-icon-button color="warn" (click)="removeS3Object(i)" aria-label="Remove photo">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </section>

    <div class="actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="!editRaceForm.valid">Save changes</button>
    </div>
  </form>
</div>
